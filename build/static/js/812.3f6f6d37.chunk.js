"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[812],{4812:(e,n,a)=>{a.r(n),a.d(n,{default:()=>i});var t=a(7313),l=a(1387),s=(a(8282),a(6417));const i=()=>{const[e,n]=(0,t.useState)(""),[a,i]=(0,t.useState)(0),[r,o]=(0,t.useState)(1),[d,c]=(0,t.useState)(""),[m,u]=(0,t.useState)("Hard"),[y,p]=(0,t.useState)("bg-sky-600"),[g,_]=(0,t.useState)("bg-gray-300"),[h,f]=(0,t.useState)("bg-gray-300"),x=(0,t.useRef)(null),[b,v]=(0,t.useState)([]);let N="",j="",w=0;const T=(0,t.useRef)(1),D=(0,t.useRef)(""),S=(0,t.useRef)(0);function G(e){"Hard"===e?(u("Hard"),p("bg-sky-600"),_("bg-gray-300"),f("bg-gray-300")):"Medium"===e?(u("Medium"),p("bg-gray-300"),_("bg-sky-600"),f("bg-gray-300")):"Easy"===e&&(u("Easy"),p("bg-gray-300"),f("bg-sky-600"),_("bg-gray-300"))}const k=e=>{x.current.send(JSON.stringify({id:"9dafaba2-98c7-11ee-b9d1-0242ac120002",payload:{query:"mutation ($_id: ID!, $tilesToUncover: [Int!]!) {\n  towerSelectTiles(_id: $_id, tilesToUncover: $tilesToUncover) {\n    __typename\n    ... on SinglePlayerGameBet {\n      id\n      isWin\n      multiplier\n      profit\n      amount\n      details {\n        ... on TowerGameDetails {\n          __typename\n          difficulty\n          levels\n          levelsCount\n          uncovered\n        }\n        ... on MinesGameDetails {\n          __typename\n        }\n        ... on DiceGameDetails {\n          __typename\n        }\n        ... on TargetGameDetails {\n          __typename\n        }\n        ... on HiloGameDetails {\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    ... on SinglePlayerGameBetInProgress {\n      _id\n      amount\n      details {\n        ... on TowerGameDetails {\n          __typename\n          difficulty\n          levels\n          levelsCount\n          uncovered\n        }\n        ... on MinesGameDetails {\n          __typename\n        }\n        ... on DiceGameDetails {\n          __typename\n        }\n        ... on TargetGameDetails {\n          __typename\n        }\n        ... on HiloGameDetails {\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n  }\n}",variables:{tilesToUncover:e.tilesToUncover,_id:e.playId}},type:"subscribe"}))};return(0,t.useEffect)((()=>(x.current=new WebSocket("wss://bch.games/api/graphql","graphql-transport-ws"),x.current.onopen=()=>{x.current.send(JSON.stringify({type:"connection_init"}))},x.current.onmessage=e=>{const n=JSON.parse(e.data);if("2302f5fa-98c0-11ee-b9d1-0242ac120002"===n.id&&n.payload)N=n.payload.data.authenticate.username;else if("134fa1dd-86c9-4bd4-ae31-2b8d0db16d98"===n.id&&n.payload){if(n.payload.errors&&"INSUFFICIENT_FUNDS_ERROR"===n.payload.errors[0].message)(0,l.Am)("Not enough BCH",{hideProgressBar:!1,autoClose:2e3,type:"error"});else if(n.payload.data){j=n.payload.data.playTower._id;let e=[0,1,2,3];k({playId:j,tilesToUncover:[e[Math.floor(Math.random()*e.length)]]})}}else if("9dafaba2-98c7-11ee-b9d1-0242ac120002"===n.id&&n.payload)if(console.log("--------\x3e",n.payload),"SinglePlayerGameBet"===n.payload.data.towerSelectTiles.__typename)v((e=>[...e,{username:N,data:n.payload.data.towerSelectTiles}])),console.log("counter---\x3e",w,"playNumber-----\x3e",T.current),w<T.current&&(w++,setTimeout((()=>{x.current.send(JSON.stringify({id:"134fa1dd-86c9-4bd4-ae31-2b8d0db16d98",payload:{query:"mutation ($amount: Float!, $autoCashout: Boolean, $clientSeed: String!, $difficulty: TowerDifficulty!, $tilesToUncover: [Int!]) {\n  playTower(\n    amount: $amount\n    autoCashout: $autoCashout\n    clientSeed: $clientSeed\n    difficulty: $difficulty\n    tilesToUncover: $tilesToUncover\n  ) {\n    __typename\n    ... on SinglePlayerGameBet {\n      id\n      isWin\n      multiplier\n      profit\n      amount\n      details {\n        ... on TowerGameDetails {\n          __typename\n          difficulty\n          levels\n          levelsCount\n          uncovered\n        }\n        ... on MinesGameDetails {\n          __typename\n        }\n        ... on DiceGameDetails {\n          __typename\n        }\n        ... on TargetGameDetails {\n          __typename\n        }\n        ... on HiloGameDetails {\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    ... on SinglePlayerGameBetInProgress {\n      _id\n      amount\n      details {\n        ... on TowerGameDetails {\n          __typename\n          difficulty\n          levels\n          levelsCount\n          uncovered\n        }\n        ... on MinesGameDetails {\n          __typename\n        }\n        ... on DiceGameDetails {\n          __typename\n        }\n        ... on TargetGameDetails {\n          __typename\n        }\n        ... on HiloGameDetails {\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n  }\n}",variables:{difficulty:m,amount:parseInt(S.current),clientSeed:D.current}},type:"subscribe"}))}),500));else if("SinglePlayerGameBetInProgress"===n.payload.data.towerSelectTiles.__typename){let e=[0,1,2,3];k({playId:j,tilesToUncover:[e[Math.floor(Math.random()*e.length)]]})}},()=>{x.current&&x.current.close()})),[]),(0,t.useEffect)((()=>{T.current=r,D.current=e,S.current=a}),[r,a,e]),(0,s.jsxs)("div",{className:"w-screen",children:[(0,s.jsxs)("div",{className:"inline-flex mb-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mr-[70px]",children:(0,s.jsx)("div",{className:"text-[20px]",children:"UserId"})}),(0,s.jsx)("input",{className:"items-center text-sm leading-6 text-black rounded-md ring-1 shadow-sm py-1.5 pl-2 pr-3 hover:ring-white bg-gray-300 dark:highlight-white/5 dark:hover:bg-gray-100",onChange:function(e){n(e.target.value)}})]}),(0,s.jsxs)("div",{className:"inline-flex w-full mb-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mr-[32px]",children:(0,s.jsx)("div",{className:"text-[20px]",children:"UserToken"})}),(0,s.jsx)("input",{className:"items-center text-sm leading-6 text-black rounded-md ring-1 shadow-sm py-1.5 pl-2 pr-3 hover:ring-white bg-gray-300 dark:highlight-white/5 dark:hover:bg-gray-100",onChange:function(e){c(e.target.value)}})]}),(0,s.jsxs)("div",{className:"inline-flex w-full mb-5",children:[(0,s.jsx)("div",{className:"flex items-center mr-[58px]",children:(0,s.jsx)("div",{className:"text-[20px]",children:"Amount"})}),(0,s.jsx)("input",{className:"items-center text-sm leading-6 text-black rounded-md ring-1 shadow-sm py-1.5 pl-2 pr-3 hover:ring-white bg-gray-300 dark:highlight-white/5 dark:hover:bg-gray-100",onChange:function(e){i(e.target.value)}})]}),(0,s.jsxs)("div",{className:"inline-flex w-full mb-5",children:[(0,s.jsx)("button",{className:"rounded-full ".concat(y," hover:bg-gray-500 ml-3"),onClick:()=>{G("Hard")},children:(0,s.jsx)("div",{className:"mx-[20px]",children:"Hard"})}),(0,s.jsx)("button",{className:"rounded-full ".concat(g," hover:bg-gray-500 ml-3"),onClick:()=>{G("Medium")},children:(0,s.jsx)("div",{className:"mx-[20px]",children:"Medium"})}),(0,s.jsx)("button",{className:"rounded-full ".concat(h," hover:bg-gray-500 ml-3"),onClick:()=>{G("Easy")},children:(0,s.jsx)("div",{className:"mx-[20px]",children:"Easy"})})]}),(0,s.jsxs)("div",{className:"inline-flex w-full mb-5",children:[(0,s.jsx)("div",{className:"flex items-center mr-[28px]",children:(0,s.jsx)("div",{className:"text-[20px]",children:"Play Number"})}),(0,s.jsx)("input",{className:"items-center text-sm leading-6 text-black rounded-md ring-1 shadow-sm py-1.5 pl-2 pr-3 hover:ring-white bg-gray-300 dark:highlight-white/5 dark:hover:bg-gray-100",onChange:function(e){o(parseInt(e.target.value))}}),(0,s.jsx)("button",{className:"rounded-full bg-gray-300 hover:bg-gray-500 ml-3",onClick:()=>{(async()=>{""===e?(0,l.Am)("Please input UserID",{hideProgressBar:!1,autoClose:2e3,type:"error"}):0===a?(0,l.Am)("Please input Amount",{hideProgressBar:!1,autoClose:2e3,type:"error"}):""===d?(0,l.Am)("Please input userToken",{hideProgressBar:!1,autoClose:2e3,type:"error"}):(w=0,x.current&&(setTimeout((()=>{x.current.send(JSON.stringify({id:"2302f5fa-98c0-11ee-b9d1-0242ac120002",payload:{query:'{\n  authenticate(\n    authToken: \n"'+d+'"\n  ) {\n    _id\n    username\n    authToken\n    email\n    twoFactorEnabled\n    role\n    countryBlock\n    __typename\n  }\n}',variables:{}},type:"subscribe"}))}),1e3),setTimeout((()=>{x.current.send(JSON.stringify({id:"134fa1dd-86c9-4bd4-ae31-2b8d0db16d98",payload:{query:"mutation ($amount: Float!, $autoCashout: Boolean, $clientSeed: String!, $difficulty: TowerDifficulty!, $tilesToUncover: [Int!]) {\n  playTower(\n    amount: $amount\n    autoCashout: $autoCashout\n    clientSeed: $clientSeed\n    difficulty: $difficulty\n    tilesToUncover: $tilesToUncover\n  ) {\n    __typename\n    ... on SinglePlayerGameBet {\n      id\n      isWin\n      multiplier\n      profit\n      amount\n      details {\n        ... on TowerGameDetails {\n          __typename\n          difficulty\n          levels\n          levelsCount\n          uncovered\n        }\n        ... on MinesGameDetails {\n          __typename\n        }\n        ... on DiceGameDetails {\n          __typename\n        }\n        ... on TargetGameDetails {\n          __typename\n        }\n        ... on HiloGameDetails {\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    ... on SinglePlayerGameBetInProgress {\n      _id\n      amount\n      details {\n        ... on TowerGameDetails {\n          __typename\n          difficulty\n          levels\n          levelsCount\n          uncovered\n        }\n        ... on MinesGameDetails {\n          __typename\n        }\n        ... on DiceGameDetails {\n          __typename\n        }\n        ... on TargetGameDetails {\n          __typename\n        }\n        ... on HiloGameDetails {\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n  }\n}",variables:{difficulty:m,amount:parseInt(a),clientSeed:e}},type:"subscribe"}))}),2e3)))})()},children:(0,s.jsx)("div",{className:"mx-[20px]",children:"Play"})})]}),0!=b.length?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"table text-[15px] w-full",children:[(0,s.jsx)("div",{className:"table-header-group",children:(0,s.jsxs)("div",{className:"table-row",children:[(0,s.jsx)("div",{className:"table-cell text-left",children:"No"}),(0,s.jsx)("div",{className:"table-cell text-left",children:"User"}),(0,s.jsx)("div",{className:"table-cell text-left",children:"Amount"}),(0,s.jsx)("div",{className:"table-cell text-left",children:"Id"}),(0,s.jsx)("div",{className:"table-cell text-left",children:"Multiplier"}),(0,s.jsx)("div",{className:"table-cell text-left",children:"Profit"})]})}),(0,s.jsx)("div",{className:"table-row-group",children:b.map(((e,n)=>(0,s.jsxs)("div",{className:"table-row",children:[(0,s.jsx)("div",{className:"table-cell",children:n+1}),(0,s.jsx)("div",{className:"table-cell",children:e.username}),(0,s.jsx)("div",{className:"table-cell",children:e.data.amount}),(0,s.jsx)("div",{className:"table-cell",children:e.data.id}),(0,s.jsx)("div",{className:"table-cell",children:e.data.multiplier}),(0,s.jsx)("div",{className:"table-cell",children:e.data.profit})]},n)))})]})}):null,(0,s.jsx)(l.Ix,{})]})}}}]);